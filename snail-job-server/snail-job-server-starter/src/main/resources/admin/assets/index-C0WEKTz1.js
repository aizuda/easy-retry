import{_ as $e}from"./table-header-operation.vue_vue_type_script_setup_true_lang-CCVNa7vh.js";import{d as X,aj as y,bB as Le,bC as je,bp as Fe,bD as Ke,bE as ze,al as qe,ao as he,n as le,as as W,ar as ke,av as We,at as Ge,ax as He,bF as Ye,p as Q,aD as te,aE as Qe,aA as De,a as $,aG as Xe,bG as Je,aH as Ze,ay as ea,B as L,aW as Te,bH as Re,bI as ie,bJ as ce,bK as aa,aM as Z,bL as Ne,bM as ta,aQ as pe,bN as na,o as V,b as ee,e as Ce,bO as T,U as Oe,V as la,$ as t,r as oa,f as a,_ as fe,W as Ve,c as S,w as i,g as we,t as Ae,h as o,Q as de,bP as sa,R as me,S as H,bQ as ua,bR as ra,a3 as ia,bu as ca,bS as pa,bT as da,s as ma,a8 as ga,a9 as ge,bU as va,N as ve,bV as fa,I as ha,aa as ya}from"./index-C0jHFrT7.js";import{f as _a,a as ba,b as Pa}from"./system-manage-Cf74QybA.js";import{_ as Ia,b as ka,u as Ta,a as Ra,N as Na}from"./table-CCLDLnqu.js";import{u as Oa,a as Va,b as wa}from"./form-W0W3zplR.js";import{N as Aa}from"./ButtonGroup-BC2Di0vs.js";import{A as Da,a as Ca,_ as Ua,e as Ea,b as xa}from"./Grid-CiG62sXN.js";import{_ as Sa}from"./Space-DUmk9ljR.js";const Ma=X({name:"ArrowUp",render(){return y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},y("g",{fill:"none"},y("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),Ba=()=>ze,$a=Le({name:"DynamicInput",common:je,peers:{Input:Fe,Button:Ke},self:Ba}),ye=qe("n-dynamic-input"),La=X({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:s,placeholderRef:h}=he(ye);return{mergedTheme:s,placeholder:h}},render(){const{mergedTheme:s,placeholder:h,value:g,clsPrefix:p,onUpdateValue:f,disabled:A}=this;return y("div",{class:`${p}-dynamic-input-preset-input`},y(le,{theme:s.peers.Input,"theme-overrides":s.peerOverrides.Input,value:g,placeholder:h,onUpdateValue:f,disabled:A}))}}),ja=X({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(s){const{mergedThemeRef:h,keyPlaceholderRef:g,valuePlaceholderRef:p}=he(ye);return{mergedTheme:h,keyPlaceholder:g,valuePlaceholder:p,handleKeyInput(f){s.onUpdateValue({key:f,value:s.value.value})},handleValueInput(f){s.onUpdateValue({key:s.value.key,value:f})}}},render(){const{mergedTheme:s,keyPlaceholder:h,valuePlaceholder:g,value:p,clsPrefix:f,disabled:A}=this;return y("div",{class:`${f}-dynamic-input-preset-pair`},y(le,{theme:s.peers.Input,"theme-overrides":s.peerOverrides.Input,value:p.key,class:`${f}-dynamic-input-pair-input`,placeholder:h,onUpdateValue:this.handleKeyInput,disabled:A}),y(le,{theme:s.peers.Input,"theme-overrides":s.peerOverrides.Input,value:p.value,class:`${f}-dynamic-input-pair-input`,placeholder:g,onUpdateValue:this.handleValueInput,disabled:A}))}}),Fa=W("dynamic-input",{width:"100%"},[W("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[W("dynamic-input-preset-input",{flex:1,alignItems:"center"}),W("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[W("dynamic-input-pair-input",[ke("&:first-child",{"margin-right":"12px"})])]),We("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[Ge("icon",{cursor:"pointer"})]),ke("&:last-child",{marginBottom:0})]),W("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[W("form-item-blank",{paddingTop:"0 !important"})])]),ne=new WeakMap,Ka=Object.assign(Object.assign({},De.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),za=X({name:"DynamicInput",props:Ka,setup(s,{slots:h}){const{mergedComponentPropsRef:g,mergedClsPrefixRef:p,mergedRtlRef:f,inlineThemeDisabled:A}=He(),R=he(Ye,null),D=Q(s.defaultValue),U=te(s,"value"),w=Qe(U,D),e=De("DynamicInput","-dynamic-input",Fa,$a,s,p),P=$(()=>{const{value:n}=w;if(Array.isArray(n)){const{max:u}=s;return u!==void 0&&n.length>=u}return!1}),j=$(()=>{const{value:n}=w;return Array.isArray(n)?n.length<=s.min:!0}),F=$(()=>{var n,u;return(u=(n=g==null?void 0:g.value)===null||n===void 0?void 0:n.DynamicInput)===null||u===void 0?void 0:u.buttonSize});function O(n){const{onInput:u,"onUpdate:value":d,onUpdateValue:v}=s;u&&pe(u,n),d&&pe(d,n),v&&pe(v,n),D.value=n}function K(n,u){if(n==null||typeof n!="object")return u;const d=ie(n)?ce(n):n;let v=ne.get(d);return v===void 0&&ne.set(d,v=aa()),v}function M(n,u){const{value:d}=w,v=Array.from(d??[]),m=v[n];if(v[n]=u,m&&u&&typeof m=="object"&&typeof u=="object"){const r=ie(m)?ce(m):m,I=ie(u)?ce(u):u,k=ne.get(r);k!==void 0&&ne.set(I,k)}O(v)}function B(){N(-1)}function N(n){const{value:u}=w,{onCreate:d}=s,v=Array.from(u??[]);if(d)v.splice(n+1,0,d(n+1)),O(v);else if(h.default)v.splice(n+1,0,null),O(v);else switch(s.preset){case"input":v.splice(n+1,0,""),O(v);break;case"pair":v.splice(n+1,0,{key:"",value:""}),O(v);break}}function E(n){const{value:u}=w;if(!Array.isArray(u))return;const{min:d}=s;if(u.length<=d)return;const{onRemove:v}=s;v&&v(n);const m=Array.from(u);m.splice(n,1),O(m)}function _(n,u,d){if(u<0||d<0||u>=n.length||d>=n.length||u===d)return;const v=n[u];n[u]=n[d],n[d]=v}function x(n,u){const{value:d}=w;if(!Array.isArray(d))return;const v=Array.from(d);n==="up"&&_(v,u,u-1),n==="down"&&_(v,u,u+1),O(v)}Xe(ye,{mergedThemeRef:e,keyPlaceholderRef:te(s,"keyPlaceholder"),valuePlaceholderRef:te(s,"valuePlaceholder"),placeholderRef:te(s,"placeholder")});const J=Je("DynamicInput",f,p),z=$(()=>{const{self:{actionMargin:n,actionMarginRtl:u}}=e.value;return{"--action-margin":n,"--action-margin-rtl":u}}),c=A?Ze("dynamic-input",void 0,z,s):void 0;return{locale:ea("DynamicInput").localeRef,rtlEnabled:J,buttonSize:F,mergedClsPrefix:p,NFormItem:R,uncontrolledValue:D,mergedValue:w,insertionDisabled:P,removeDisabled:j,handleCreateClick:B,ensureKey:K,handleValueChange:M,remove:E,move:x,createItem:N,mergedTheme:e,cssVars:A?void 0:z,themeClass:c==null?void 0:c.themeClass,onRender:c==null?void 0:c.onRender}},render(){const{$slots:s,itemClass:h,buttonSize:g,mergedClsPrefix:p,mergedValue:f,locale:A,mergedTheme:R,keyField:D,itemStyle:U,preset:w,showSortButton:e,NFormItem:P,ensureKey:j,handleValueChange:F,remove:O,createItem:K,move:M,onRender:B,disabled:N}=this;return B==null||B(),y("div",{class:[`${p}-dynamic-input`,this.rtlEnabled&&`${p}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(f)||f.length===0?y(L,Object.assign({block:!0,ghost:!0,dashed:!0,size:g},this.createButtonProps,{disabled:this.insertionDisabled||N,theme:R.peers.Button,themeOverrides:R.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>Te(s["create-button-default"],()=>[A.create]),icon:()=>Te(s["create-button-icon"],()=>[y(Z,{clsPrefix:p},{default:()=>y(Ne,null)})])}):f.map((E,_)=>y("div",{key:D?E[D]:j(E,_),"data-key":D?E[D]:j(E,_),class:[`${p}-dynamic-input-item`,h],style:U},Re(s.default,{value:f[_],index:_},()=>[w==="input"?y(La,{disabled:N,clsPrefix:p,value:f[_],parentPath:P?P.path.value:void 0,path:P!=null&&P.path.value?`${P.path.value}[${_}]`:void 0,onUpdateValue:x=>{F(_,x)}}):w==="pair"?y(ja,{disabled:N,clsPrefix:p,value:f[_],parentPath:P?P.path.value:void 0,path:P!=null&&P.path.value?`${P.path.value}[${_}]`:void 0,onUpdateValue:x=>{F(_,x)}}):null]),Re(s.action,{value:f[_],index:_,create:K,remove:O,move:M},()=>[y("div",{class:`${p}-dynamic-input-item__action`},y(Aa,{size:g},{default:()=>[y(L,{disabled:this.removeDisabled||N,theme:R.peers.Button,themeOverrides:R.peerOverrides.Button,circle:!0,onClick:()=>{O(_)}},{icon:()=>y(Z,{clsPrefix:p},{default:()=>y(ta,null)})}),y(L,{disabled:this.insertionDisabled||N,circle:!0,theme:R.peers.Button,themeOverrides:R.peerOverrides.Button,onClick:()=>{K(_)}},{icon:()=>y(Z,{clsPrefix:p},{default:()=>y(Ne,null)})}),e?y(L,{disabled:_===0||N,circle:!0,theme:R.peers.Button,themeOverrides:R.peerOverrides.Button,onClick:()=>{M("up",_)}},{icon:()=>y(Z,{clsPrefix:p},{default:()=>y(Ma,null)})}):null,e?y(L,{disabled:_===f.length-1||N,circle:!0,theme:R.peers.Button,themeOverrides:R.peerOverrides.Button,onClick:()=>{M("down",_)}},{icon:()=>y(Z,{clsPrefix:p},{default:()=>y(Da,null)})}):null]}))]))))}}),Ue={Y:"common.yesOrNo.yes",N:"common.yesOrNo.no"};na(Ue);const qa={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Wa=Ce("path",{fill:"currentColor",d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1"},null,-1),Ga=[Wa];function Ha(s,h){return V(),ee("svg",qa,[...Ga])}const Ya={name:"ic-round-remove",render:Ha};function Qa(){return Object.keys(Object.assign({"/src/assets/svg-icon/activity.svg":()=>T(()=>import("./activity-B4XY664I.js"),[]),"/src/assets/svg-icon/at-sign.svg":()=>T(()=>import("./at-sign-DvqQw7Qx.js"),[]),"/src/assets/svg-icon/avatar.svg":()=>T(()=>import("./avatar-CzPNckT2.js"),[]),"/src/assets/svg-icon/banner.svg":()=>T(()=>import("./banner-CyamVenV.js"),[]),"/src/assets/svg-icon/cast.svg":()=>T(()=>import("./cast-n3EmpXB4.js"),[]),"/src/assets/svg-icon/chrome.svg":()=>T(()=>import("./chrome-BM_Le6p_.js"),[]),"/src/assets/svg-icon/copy.svg":()=>T(()=>import("./copy-BsYpLlfM.js"),[]),"/src/assets/svg-icon/custom-icon.svg":()=>T(()=>import("./custom-icon-857Ak5pp.js"),[]),"/src/assets/svg-icon/empty-data.svg":()=>T(()=>import("./empty-data-DX35y6ZB.js"),[]),"/src/assets/svg-icon/expectation.svg":()=>T(()=>import("./expectation-Cmg76Xc5.js"),[]),"/src/assets/svg-icon/full-logo.svg":()=>T(()=>import("./full-logo-tRXjg-PT.js"),[]),"/src/assets/svg-icon/heart.svg":()=>T(()=>import("./heart-DOH2U7VV.js"),[]),"/src/assets/svg-icon/logo.svg":()=>T(()=>import("./logo-DKMQETMV.js"),[]),"/src/assets/svg-icon/network-error.svg":()=>T(()=>import("./network-error-CegJpaAn.js"),[]),"/src/assets/svg-icon/no-icon.svg":()=>T(()=>import("./no-icon-BoYPce1Y.js"),[]),"/src/assets/svg-icon/no-permission.svg":()=>T(()=>import("./no-permission-ZchoPucC.js"),[]),"/src/assets/svg-icon/not-found.svg":()=>T(()=>import("./not-found-D2mHJhJe.js"),[]),"/src/assets/svg-icon/service-error.svg":()=>T(()=>import("./service-error-Dln9IYeC.js"),[]),"/src/assets/svg-icon/wind.svg":()=>T(()=>import("./wind-Dy5zdHKW.js"),[])})).map(g=>{var p;return((p=g.split("/").at(-1))==null?void 0:p.replace(".svg",""))||""}).filter(Boolean)}const oe="layout.",se="view.",Ee="$";function Xa(s){let h="",g="";const[p,f]=(s==null?void 0:s.split(Ee))||[];return h=Ja(p),g=Za(f||p),{layout:h,page:g}}function Ja(s){return s.startsWith(oe)?s.replace(oe,""):""}function Za(s){return s.startsWith(se)?s.replace(se,""):""}function et(s,h){const g=!!s,p=!!h;return g&&p?`${oe}${s}${Ee}${se}${h}`:g?`${oe}${s}`:p?`${se}${h}`:""}function at(s){return`/${s.replace(/_/g,"/")}`}function tt(s){const[h,g=""]=s.split("/:");return{path:h,param:g}}function nt(s,h){return h.trim()?`${s}/:${h}`:s}const lt={class:"ml-8px flex-y-center flex-1 gap-12px"},ot=X({name:"MenuOperateModal",__name:"menu-operate-modal",props:Oe({operateType:{},rowData:{},allPages:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:Oe(["submitted"],["update:visible"]),setup(s,{emit:h}){const g=s,p=h,f=la(s,"visible"),{formRef:A,validate:R,restoreValidation:D}=Oa(),{defaultRequiredRule:U}=Va(),w=$(()=>({add:t("page.manage.menu.addMenu"),addChild:t("page.manage.menu.addChildMenu"),edit:t("page.manage.menu.editMenu")})[g.operateType]),e=oa(P());function P(){return{menuType:"1",menuName:"",routeName:"",routePath:"",pathParam:"",component:"",layout:"",page:"",i18nKey:null,icon:"",iconType:"1",parentId:0,status:"1",keepAlive:!1,constant:!1,order:0,href:null,hideInMenu:!1,activeMenu:null,multiTab:!1,fixedIndexInTab:null,query:[],buttons:[]}}const j={menuName:U,status:U,routeName:U,routePath:U},F=$(()=>g.operateType==="edit"),K=Qa().map(m=>({label:()=>a("div",{class:"flex-y-center gap-16px"},[a(fe,{localIcon:m,class:"text-icon"},null),a("span",null,[m])]),value:m})),M=$(()=>e.parentId===0),B=$(()=>e.menuType==="2"),N=$(()=>{const m=[...g.allPages];return e.routeName&&!m.includes(e.routeName)&&m.unshift(e.routeName),m.map(I=>({label:I,value:I}))}),E=[{label:"base",value:"base"},{label:"blank",value:"blank"}],_=Q([]);async function x(){const{error:m,data:r}=await _a();if(!m){const I=r.map(k=>({label:k.roleName,value:k.roleCode}));_.value=[...I]}}function J(){if(Object.assign(e,P()),!!g.rowData){if(g.operateType==="addChild"){const{id:m}=g.rowData;Object.assign(e,{parentId:m})}if(g.operateType==="edit"){const{component:m,...r}=g.rowData,{layout:I,page:k}=Xa(m),{path:b,param:C}=tt(r.routePath);Object.assign(e,r,{layout:I,page:k,routePath:b,pathParam:C})}e.query||(e.query=[]),e.buttons||(e.buttons=[])}}function z(){f.value=!1}function c(){e.routeName?e.routePath=at(e.routeName):e.routePath=""}function n(){e.routeName?e.i18nKey=`route.${e.routeName}`:e.i18nKey=null}function u(){return{code:"",desc:""}}function d(){const{layout:m,page:r,pathParam:I,...k}=e,b=et(m,r),C=nt(e.routePath,I);return k.component=b,k.routePath=C,k}async function v(){var r;await R();const m=d();console.log("params: ",m),(r=window.$message)==null||r.success(t("common.updateSuccess")),z(),p("submitted")}return Ve(f,()=>{f.value&&(J(),D(),x())}),Ve(()=>e.routeName,()=>{c(),n()}),(m,r)=>{const I=Ca,k=Ua,b=Ia,C=le,ae=ia,_e=ca,be=ka,G=L,Pe=Ya,ue=Sa,Ie=za,xe=Ea,Se=wa,Me=pa,Be=da;return V(),S(Be,{show:f.value,"onUpdate:show":r[22]||(r[22]=l=>f.value=l),title:w.value,preset:"card",class:"w-800px"},{footer:i(()=>[a(ue,{justify:"end",size:16},{default:i(()=>[a(G,{onClick:z},{default:i(()=>[we(Ae(o(t)("common.cancel")),1)]),_:1}),a(G,{type:"primary",onClick:v},{default:i(()=>[we(Ae(o(t)("common.confirm")),1)]),_:1})]),_:1})]),default:i(()=>[a(Me,{class:"h-480px pr-20px"},{default:i(()=>[a(Se,{ref_key:"formRef",ref:A,model:e,rules:j,"label-placement":"left","label-width":100},{default:i(()=>[a(xe,{responsive:"screen","item-responsive":""},{default:i(()=>[a(b,{span:"24 m:12",label:o(t)("page.manage.menu.menuType"),path:"menuType"},{default:i(()=>[a(k,{value:e.menuType,"onUpdate:value":r[0]||(r[0]=l=>e.menuType=l),disabled:F.value},{default:i(()=>[(V(!0),ee(me,null,de(o(sa),l=>(V(),S(I,{key:l.value,value:l.value,label:o(t)(l.label)},null,8,["value","label"]))),128))]),_:1},8,["value","disabled"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.menuName"),path:"menuName"},{default:i(()=>[a(C,{value:e.menuName,"onUpdate:value":r[1]||(r[1]=l=>e.menuName=l),placeholder:o(t)("page.manage.menu.form.menuName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.routeName"),path:"routeName"},{default:i(()=>[a(C,{value:e.routeName,"onUpdate:value":r[2]||(r[2]=l=>e.routeName=l),placeholder:o(t)("page.manage.menu.form.routeName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.routePath"),path:"routePath"},{default:i(()=>[a(C,{value:e.routePath,"onUpdate:value":r[3]||(r[3]=l=>e.routePath=l),disabled:"",placeholder:o(t)("page.manage.menu.form.routePath")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.pathParam"),path:"pathParam"},{default:i(()=>[a(C,{value:e.pathParam,"onUpdate:value":r[4]||(r[4]=l=>e.pathParam=l),placeholder:o(t)("page.manage.menu.form.pathParam")},null,8,["value","placeholder"])]),_:1},8,["label"]),M.value?(V(),S(b,{key:0,span:"24 m:12",label:o(t)("page.manage.menu.layout"),path:"layout"},{default:i(()=>[a(ae,{value:e.layout,"onUpdate:value":r[5]||(r[5]=l=>e.layout=l),options:E,placeholder:o(t)("page.manage.menu.form.layout")},null,8,["value","placeholder"])]),_:1},8,["label"])):H("",!0),B.value?(V(),S(b,{key:1,span:"24 m:12",label:o(t)("page.manage.menu.page"),path:"page"},{default:i(()=>[a(ae,{value:e.page,"onUpdate:value":r[6]||(r[6]=l=>e.page=l),options:N.value,placeholder:o(t)("page.manage.menu.form.page")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):H("",!0),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.i18nKey"),path:"i18nKey"},{default:i(()=>[a(C,{value:e.i18nKey,"onUpdate:value":r[7]||(r[7]=l=>e.i18nKey=l),placeholder:o(t)("page.manage.menu.form.i18nKey")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.order"),path:"order"},{default:i(()=>[a(_e,{value:e.order,"onUpdate:value":r[8]||(r[8]=l=>e.order=l),class:"w-full",placeholder:o(t)("page.manage.menu.form.order")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.iconTypeTitle"),path:"iconType"},{default:i(()=>[a(k,{value:e.iconType,"onUpdate:value":r[9]||(r[9]=l=>e.iconType=l)},{default:i(()=>[(V(!0),ee(me,null,de(o(ua),l=>(V(),S(I,{key:l.value,value:l.value,label:o(t)(l.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.icon"),path:"icon"},{default:i(()=>[e.iconType==="1"?(V(),S(C,{key:0,value:e.icon,"onUpdate:value":r[10]||(r[10]=l=>e.icon=l),placeholder:o(t)("page.manage.menu.form.icon"),class:"flex-1"},{suffix:i(()=>[e.icon?(V(),S(fe,{key:0,icon:e.icon,class:"text-icon"},null,8,["icon"])):H("",!0)]),_:1},8,["value","placeholder"])):H("",!0),e.iconType==="2"?(V(),S(ae,{key:1,value:e.icon,"onUpdate:value":r[11]||(r[11]=l=>e.icon=l),placeholder:o(t)("page.manage.menu.form.localIcon"),options:o(K)},null,8,["value","placeholder","options"])):H("",!0)]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.menuStatus"),path:"status"},{default:i(()=>[a(k,{value:e.status,"onUpdate:value":r[12]||(r[12]=l=>e.status=l)},{default:i(()=>[(V(!0),ee(me,null,de(o(ra),l=>(V(),S(I,{key:l.value,value:l.value,label:o(t)(l.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.keepAlive"),path:"keepAlive"},{default:i(()=>[a(k,{value:e.keepAlive,"onUpdate:value":r[13]||(r[13]=l=>e.keepAlive=l)},{default:i(()=>[a(I,{value:"",label:o(t)("common.yesOrNo.yes")},null,8,["label"]),a(I,{value:!1,label:o(t)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.constant"),path:"constant"},{default:i(()=>[a(k,{value:e.constant,"onUpdate:value":r[14]||(r[14]=l=>e.constant=l)},{default:i(()=>[a(I,{value:"",label:o(t)("common.yesOrNo.yes")},null,8,["label"]),a(I,{value:!1,label:o(t)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.href"),path:"href"},{default:i(()=>[a(C,{value:e.href,"onUpdate:value":r[15]||(r[15]=l=>e.href=l),placeholder:o(t)("page.manage.menu.form.href")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.hideInMenu"),path:"hideInMenu"},{default:i(()=>[a(k,{value:e.hideInMenu,"onUpdate:value":r[16]||(r[16]=l=>e.hideInMenu=l)},{default:i(()=>[a(I,{value:!0,label:o(t)("common.yesOrNo.yes")},null,8,["label"]),a(I,{value:!1,label:o(t)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),e.hideInMenu?(V(),S(b,{key:2,span:"24 m:12",label:o(t)("page.manage.menu.activeMenu"),path:"activeMenu"},{default:i(()=>[a(ae,{value:e.activeMenu,"onUpdate:value":r[17]||(r[17]=l=>e.activeMenu=l),options:N.value,clearable:"",placeholder:o(t)("page.manage.menu.form.activeMenu")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):H("",!0),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.multiTab"),path:"multiTab"},{default:i(()=>[a(k,{value:e.multiTab,"onUpdate:value":r[18]||(r[18]=l=>e.multiTab=l)},{default:i(()=>[a(I,{value:"",label:o(t)("common.yesOrNo.yes")},null,8,["label"]),a(I,{value:!1,label:o(t)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:o(t)("page.manage.menu.fixedIndexInTab"),path:"fixedIndexInTab"},{default:i(()=>[a(_e,{value:e.fixedIndexInTab,"onUpdate:value":r[19]||(r[19]=l=>e.fixedIndexInTab=l),class:"w-full",clearable:"",placeholder:o(t)("page.manage.menu.form.fixedIndexInTab")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24",label:o(t)("page.manage.menu.query")},{default:i(()=>[a(Ie,{value:e.query,"onUpdate:value":r[20]||(r[20]=l=>e.query=l),preset:"pair","key-placeholder":o(t)("page.manage.menu.form.queryKey"),"value-placeholder":o(t)("page.manage.menu.form.queryValue")},{action:i(({index:l,create:q,remove:re})=>[a(ue,{class:"ml-12px"},{default:i(()=>[a(G,{size:"medium",onClick:()=>q(l)},{default:i(()=>[a(be,{class:"text-icon"})]),_:2},1032,["onClick"]),a(G,{size:"medium",onClick:()=>re(l)},{default:i(()=>[a(Pe,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value","key-placeholder","value-placeholder"])]),_:1},8,["label"]),a(b,{span:"24",label:o(t)("page.manage.menu.button")},{default:i(()=>[a(Ie,{value:e.buttons,"onUpdate:value":r[21]||(r[21]=l=>e.buttons=l),"on-create":u},{default:i(({value:l})=>[Ce("div",lt,[a(C,{value:l.code,"onUpdate:value":q=>l.code=q,placeholder:o(t)("page.manage.menu.form.buttonCode"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"]),a(C,{value:l.desc,"onUpdate:value":q=>l.desc=q,placeholder:o(t)("page.manage.menu.form.buttonDesc"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"])])]),action:i(({index:l,create:q,remove:re})=>[a(ue,{class:"ml-12px"},{default:i(()=>[a(G,{size:"medium",onClick:()=>q(l)},{default:i(()=>[a(be,{class:"text-icon"})]),_:2},1032,["onClick"]),a(G,{size:"medium",onClick:()=>re(l)},{default:i(()=>[a(Pe,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}});function Y(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!ya(s)}const gt=X({name:"manage_menu",__name:"index",setup(s){const h=ma(),{bool:g,setTrue:p}=ga(),f=Q(null),{columns:A,columnChecks:R,data:D,loading:U,pagination:w,getData:e}=Ta({apiFn:ba,columns:()=>[{type:"selection",align:"center",width:48},{key:"id",title:t("page.manage.menu.id"),align:"center"},{key:"menuType",title:t("page.manage.menu.menuType"),align:"center",width:80,render:c=>{const n={1:"default",2:"primary"},u=t(va[c.menuType]);return a(ve,{type:n[c.menuType]},Y(u)?u:{default:()=>[u]})}},{key:"menuName",title:t("page.manage.menu.menuName"),align:"center",minWidth:120,render:c=>{const{i18nKey:n,menuName:u}=c,d=n?t(n):u;return a("span",null,[d])}},{key:"icon",title:t("page.manage.menu.icon"),align:"center",width:60,render:c=>{const n=c.iconType==="1"?c.icon:void 0,u=c.iconType==="2"?c.icon:void 0;return a("div",{class:"flex-center"},[a(fe,{icon:n,localIcon:u,class:"text-icon"},null)])}},{key:"routeName",title:t("page.manage.menu.routeName"),align:"center",minWidth:120},{key:"routePath",title:t("page.manage.menu.routePath"),align:"center",minWidth:120},{key:"status",title:t("page.manage.menu.menuStatus"),align:"center",width:80,render:c=>{if(c.status===null)return null;const n={1:"success",2:"warning"},u=t(fa[c.status]);return a(ve,{type:n[c.status]},Y(u)?u:{default:()=>[u]})}},{key:"hideInMenu",title:t("page.manage.menu.hideInMenu"),align:"center",width:80,render:c=>{const n=c.hideInMenu?"Y":"N",u={Y:"error",N:"default"},d=t(Ue[n]);return a(ve,{type:u[n]},Y(d)?d:{default:()=>[d]})}},{key:"parentId",title:t("page.manage.menu.parentId"),width:90,align:"center"},{key:"order",title:t("page.manage.menu.order"),align:"center",width:60},{key:"operate",title:t("common.operate"),align:"center",width:230,render:c=>{let n,u;return a("div",{class:"flex-center justify-end gap-8px"},[c.menuType==="1"&&a(L,{type:"primary",ghost:!0,size:"small",onClick:()=>_(c)},Y(n=t("page.manage.menu.addChildMenu"))?n:{default:()=>[n]}),a(L,{type:"primary",ghost:!0,size:"small",onClick:()=>E(c)},Y(u=t("common.edit"))?u:{default:()=>[u]}),a(Na,{onPositiveClick:()=>B(c.id)},{default:()=>t("common.confirmDelete"),trigger:()=>{let d;return a(L,{type:"error",ghost:!0,size:"small"},Y(d=t("common.delete"))?d:{default:()=>[d]})}})])}}]}),{checkedRowKeys:P,onBatchDeleted:j,onDeleted:F}=Ra(D,e),O=Q("add");function K(){O.value="add",p()}async function M(){console.log(P.value),j()}function B(c){console.log(c),F()}const N=Q(null);function E(c){O.value="edit",N.value={...c},p()}function _(c){O.value="addChild",N.value={...c},p()}const x=Q([]);async function J(){const{data:c}=await Pa();x.value=c||[]}function z(){J()}return z(),(c,n)=>{const u=$e,d=xa,v=ha;return V(),ee("div",{ref_key:"wrapperRef",ref:f,class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},[a(v,{title:o(t)("page.manage.menu.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":i(()=>[a(u,{columns:o(R),"onUpdate:columns":n[0]||(n[0]=m=>ge(R)?R.value=m:null),"disabled-delete":o(P).length===0,loading:o(U),onAdd:K,onDelete:M,onRefresh:o(e)},null,8,["columns","disabled-delete","loading","onRefresh"])]),default:i(()=>[a(d,{"checked-row-keys":o(P),"onUpdate:checkedRowKeys":n[1]||(n[1]=m=>ge(P)?P.value=m:null),columns:o(A),data:o(D),size:"small","flex-height":!o(h).isMobile,"scroll-x":1088,loading:o(U),"row-key":m=>m.id,remote:"",pagination:o(w),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),a(ot,{visible:o(g),"onUpdate:visible":n[2]||(n[2]=m=>ge(g)?g.value=m:null),"operate-type":O.value,"row-data":N.value,"all-pages":x.value,onSubmitted:o(e)},null,8,["visible","operate-type","row-data","all-pages","onSubmitted"])]),_:1},8,["title"])],512)}}});export{gt as default};
