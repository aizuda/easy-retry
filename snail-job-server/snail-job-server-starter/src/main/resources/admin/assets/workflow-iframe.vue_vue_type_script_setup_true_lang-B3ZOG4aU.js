import{d as v,p as c,J as _,bb as k,i as g,j as b,o as $,c as E,w as L,e as R,h as a,$ as r}from"./index-C0jHFrT7.js";import{_ as x}from"./Spin-gHaOWldE.js";const B=["src"],F=v({name:"WorkFlowIframe",__name:"workflow-iframe",props:{value:{}},setup(S){const o=c(),l=_(),n=k(),d=l.query.id,t=c(!0),i="prod",f="/snail-job";function u(){var e;window.removeEventListener("message",s),(e=window.$message)==null||e.info(r("common.addSuccess")),n.push({path:"/workflow/task"})}function m(){window.removeEventListener("message",s),n.push({path:"/workflow/task"})}function p(){var e;(e=window.$message)==null||e.info(r("common.updateSuccess")),n.push({path:"/workflow/task"})}function s(e){typeof e.data=="object"&&(e.data.code==="SV5ucvLBhvFkOftb"?u():e.data.code==="kb4DO9h6WIiqFhbp"?m():e.data.code==="8Rr3XPtVVAHfduQg"&&p())}function w(){o.value.attachEvent?o.value.attachEvent("onload",()=>{t.value=!1}):o.value.onload=()=>{t.value=!1}}return window.addEventListener("message",s,!1),g(()=>{w()}),b(()=>{window.removeEventListener("message",s)}),(e,V)=>{const h=x;return $(),E(h,{show:t.value,size:"large",description:"工作流加载中",class:"h-full","content-class":"h-full"},{default:L(()=>[R("iframe",{ref_key:"iframeRef",ref:o,class:"size-full",src:`${a(i)==="prod"?a(f):""}/lib/index.html?id=${a(d)}&mode=${a(i)}&x1c2Hdd6=${e.value}`},null,8,B)]),_:1},8,["show"])}}});export{F as _};
