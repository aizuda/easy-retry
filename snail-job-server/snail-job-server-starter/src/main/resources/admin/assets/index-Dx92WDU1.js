import{_ as vt}from"./table-header-operation.vue_vue_type_script_setup_true_lang-CCVNa7vh.js";import{d as re,aj as C,al as Kn,ao as Ee,bW as mt,bX as bt,aM as pt,bY as yt,p as G,bZ as cn,a as z,b_ as kt,b$ as Z,i as xt,c0 as wt,aS as Ye,c1 as Tn,c2 as _t,as as M,ar as ce,at as H,c3 as xn,av as Ke,aw as Te,c4 as Nt,ax as Rt,bG as Ct,aA as An,c5 as St,aY as Ue,aD as O,aE as Xe,W as Ae,aF as Qe,c6 as Me,c7 as wn,c8 as Dt,aQ as ee,aG as Kt,c9 as un,aH as Tt,aW as _n,aV as At,ca as Nn,cb as Lt,cc as Rn,U as ze,V as Ze,$ as N,cd as Le,o as pe,c as Be,w as S,f as x,g as he,t as ue,h as m,e as Cn,a3 as Ln,B as Fe,bT as Pn,a8 as Sn,r as Pt,b as Bn,Q as Bt,bR as Fn,R as Ft,a9 as Pe,S as Et,n as En,ce as Ot,cf as It,Y as $t,I as On,s as Ut,bV as Mt,N as zt,aa as jt}from"./index-C0jHFrT7.js";import{b as Ht,c as Vt,d as qt}from"./system-manage-Cf74QybA.js";import{_ as Gt,u as Wt,a as Yt,N as Xt}from"./table-CCLDLnqu.js";import{u as Qt,a as Zt,_ as Jt,b as In}from"./form-W0W3zplR.js";import{_ as Je}from"./Space-DUmk9ljR.js";import{_ as el,a as nl,e as tl,b as ll}from"./Grid-CiG62sXN.js";import{_ as ol,a as al}from"./round-search-BfyTeFqd.js";function $n(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const il=re({name:"Switcher",render(){return C("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},C("path",{d:"M12 8l10 8l-10 8z"}))}}),Un=Kn("n-tree-select"),je=Kn("n-tree"),rl=re({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:t}=Ee(je,null);return()=>{const{clsPrefix:i,expanded:d,hide:s,indent:r,onClick:_}=e;return C("span",{"data-switcher":!0,class:[`${i}-tree-node-switcher`,d&&`${i}-tree-node-switcher--expanded`,s&&`${i}-tree-node-switcher--hide`],style:{width:`${r}px`},onClick:_},C("div",{class:`${i}-tree-node-switcher__icon`},C(mt,null,{default:()=>{if(e.loading)return C(bt,{clsPrefix:i,key:"loading",radius:85,strokeWidth:20});const{value:h}=t;return h?h({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):C(pt,{clsPrefix:i,key:"switcher"},{default:()=>C(il,null)})}})))}}}),dl=re({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Ee(je);function i(s){const{onCheck:r}=e;r&&r(s)}function d(s){i(s)}return{handleUpdateValue:d,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:i,indeterminate:d,disabled:s,focusable:r,indent:_,handleUpdateValue:h}=this;return C("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${_}px`},"data-checkbox":!0},C(yt,{focusable:r,disabled:s,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:i,indeterminate:d,onUpdateChecked:h}))}}),sl=re({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:i,renderSuffixRef:d,labelFieldRef:s}=Ee(je),r=G(null);function _(g){const{onClick:w}=e;w&&w(g)}function h(g){_(g)}return{selfRef:r,renderLabel:t,renderPrefix:i,renderSuffix:d,labelField:s,handleClick:h}},render(){const{clsPrefix:e,labelField:t,nodeProps:i,checked:d=!1,selected:s=!1,renderLabel:r,renderPrefix:_,renderSuffix:h,handleClick:g,onDragstart:w,tmNode:{rawNode:p,rawNode:{prefix:D,suffix:y,[t]:K}}}=this;return C("span",Object.assign({},i,{ref:"selfRef",class:[`${e}-tree-node-content`,i==null?void 0:i.class],onClick:g,draggable:w===void 0?void 0:!0,onDragstart:w}),_||D?C("div",{class:`${e}-tree-node-content__prefix`},_?_({option:p,selected:s,checked:d}):cn(D)):null,C("div",{class:`${e}-tree-node-content__text`},r?r({option:p,selected:s,checked:d}):cn(K)),h||y?C("div",{class:`${e}-tree-node-content__suffix`},h?h({option:p,selected:s,checked:d}):cn(y)):null)}});function Dn({position:e,offsetLevel:t,indent:i,el:d}){const s={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")s.left=0,s.top=0,s.bottom=0,s.borderRadius="inherit",s.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const r=e==="before"?"top":"bottom";s[r]=0,s.left=`${d.offsetLeft+6-t*i}px`,s.height="2px",s.backgroundColor="var(--n-drop-mark-color)",s.transformOrigin=r,s.borderRadius="1px",s.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return C("div",{style:s})}function cl({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function ul(e){return z(()=>e.leafOnly?"child":e.checkStrategy)}function be(e,t){return!!e.rawNode[t]}function Mn(e,t,i,d){e==null||e.forEach(s=>{i(s),Mn(s[t],t,i,d),d(s)})}function fl(e,t,i,d,s){const r=new Set,_=new Set,h=[];return Mn(e,d,g=>{if(h.push(g),s(t,g)){_.add(g[i]);for(let w=h.length-2;w>=0;--w)if(!r.has(h[w][i]))r.add(h[w][i]);else return}},()=>{h.pop()}),{expandedKeys:Array.from(r),highlightKeySet:_}}if(kt&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function hl(e,t,i,d,s){const r=new Set,_=new Set,h=new Set,g=[],w=[],p=[];function D(K){K.forEach(k=>{if(p.push(k),t(i,k)){r.add(k[d]),h.add(k[d]);for(let v=p.length-2;v>=0;--v){const a=p[v][d];if(!_.has(a))_.add(a),r.has(a)&&r.delete(a);else break}}const R=k[s];R&&D(R),p.pop()})}D(e);function y(K,k){K.forEach(R=>{const v=R[d],a=r.has(v),b=_.has(v);if(!a&&!b)return;const L=R[s];if(L)if(a)k.push(R);else{g.push(v);const $=Object.assign(Object.assign({},R),{[s]:[]});k.push($),y(L,$[s])}else k.push(R)})}return y(e,w),{filteredTree:w,highlightKeySet:h,expandedKeys:g}}const zn=re({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Ee(je),{droppingNodeParentRef:i,droppingMouseNodeRef:d,draggingNodeRef:s,droppingPositionRef:r,droppingOffsetLevelRef:_,nodePropsRef:h,indentRef:g,blockLineRef:w,checkboxPlacementRef:p,checkOnClickRef:D,disabledFieldRef:y,showLineRef:K,renderSwitcherIconRef:k,overrideDefaultNodeClickBehaviorRef:R}=t,v=Z(()=>!!e.tmNode.rawNode.checkboxDisabled),a=Z(()=>be(e.tmNode,y.value)),b=Z(()=>t.disabledRef.value||a.value),L=z(()=>{const{value:c}=h;if(c)return c({option:e.tmNode.rawNode})}),$=G(null),F={value:null};xt(()=>{F.value=$.value.$el});function T(){const c=()=>{const{tmNode:P}=e;if(!P.isLeaf&&!P.shallowLoaded){if(!t.loadingKeysRef.value.has(P.key))t.loadingKeysRef.value.add(P.key);else return;const{onLoadRef:{value:I}}=t;I&&I(P.rawNode).then(V=>{V!==!1&&t.handleSwitcherClick(P)}).finally(()=>{t.loadingKeysRef.value.delete(P.key)})}else t.handleSwitcherClick(P)};k.value?setTimeout(c,0):c()}const A=Z(()=>!a.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),W=Z(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),le=Z(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),q=Z(()=>{const{value:c}=W;if(!c)return!1;const{value:P}=D,{tmNode:I}=e;return typeof P=="boolean"?!I.disabled&&P:P(e.tmNode.rawNode)});function ye(c){const{value:P}=t.expandOnClickRef,{value:I}=A,{value:V}=q;if(!I&&!P&&!V||Ye(c,"checkbox")||Ye(c,"switcher"))return;const{tmNode:Q}=e;I&&t.handleSelect(Q),P&&!Q.isLeaf&&T(),V&&oe(!le.value)}function ke(c){var P,I;if(!(Ye(c,"checkbox")||Ye(c,"switcher"))){if(!b.value){const V=R.value;let Q=!1;if(V)switch(V({option:e.tmNode.rawNode})){case"toggleCheck":Q=!0,oe(!le.value);break;case"toggleSelect":Q=!0,t.handleSelect(e.tmNode);break;case"toggleExpand":Q=!0,T(),Q=!0;break;case"none":Q=!0,Q=!0;return}Q||ye(c)}(I=(P=L.value)===null||P===void 0?void 0:P.onClick)===null||I===void 0||I.call(P,c)}}function ge(c){w.value||ke(c)}function X(c){w.value&&ke(c)}function oe(c){t.handleCheck(e.tmNode,c)}function fe(c){t.handleDragStart({event:c,node:e.tmNode})}function j(c){c.currentTarget===c.target&&t.handleDragEnter({event:c,node:e.tmNode})}function de(c){c.preventDefault(),t.handleDragOver({event:c,node:e.tmNode})}function ve(c){t.handleDragEnd({event:c,node:e.tmNode})}function Oe(c){c.currentTarget===c.target&&t.handleDragLeave({event:c,node:e.tmNode})}function en(c){c.preventDefault(),r.value!==null&&t.handleDrop({event:c,node:e.tmNode,dropPosition:r.value})}const nn=z(()=>{const{clsPrefix:c}=e,{value:P}=g;if(K.value){const I=[];let V=e.tmNode.parent;for(;V;)V.isLastChild?I.push(C("div",{class:`${c}-tree-node-indent`},C("div",{style:{width:`${P}px`}}))):I.push(C("div",{class:[`${c}-tree-node-indent`,`${c}-tree-node-indent--show-line`]},C("div",{style:{width:`${P}px`}}))),V=V.parent;return I.reverse()}else return wt(e.tmNode.level,C("div",{class:`${e.clsPrefix}-tree-node-indent`},C("div",{style:{width:`${P}px`}})))});return{showDropMark:Z(()=>{const{value:c}=s;if(!c)return;const{value:P}=r;if(!P)return;const{value:I}=d;if(!I)return;const{tmNode:V}=e;return V.key===I.key}),showDropMarkAsParent:Z(()=>{const{value:c}=i;if(!c)return!1;const{tmNode:P}=e,{value:I}=r;return I==="before"||I==="after"?c.key===P.key:!1}),pending:Z(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:Z(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:Z(()=>{var c;return(c=t.highlightKeySetRef.value)===null||c===void 0?void 0:c.has(e.tmNode.key)}),checked:le,indeterminate:Z(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:Z(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:Z(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:b,checkable:W,mergedCheckOnClick:q,checkboxDisabled:v,selectable:A,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:w,nodeProps:L,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:r,droppingOffsetLevel:_,indent:g,checkboxPlacement:p,showLine:K,contentInstRef:$,contentElRef:F,indentNodes:nn,handleCheck:oe,handleDrop:en,handleDragStart:fe,handleDragEnter:j,handleDragOver:de,handleDragEnd:ve,handleDragLeave:Oe,handleLineClick:X,handleContentClick:ge,handleSwitcherClick:T}},render(){const{tmNode:e,clsPrefix:t,checkable:i,expandOnClick:d,selectable:s,selected:r,checked:_,highlight:h,draggable:g,blockLine:w,indent:p,indentNodes:D,disabled:y,pending:K,internalScrollable:k,nodeProps:R,checkboxPlacement:v}=this,a=g&&!y?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,b=k?$n(e.key):void 0,L=v==="right",$=i?C(dl,{indent:p,right:L,focusable:this.checkboxFocusable,disabled:y||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return C("div",Object.assign({class:`${t}-tree-node-wrapper`},a),C("div",Object.assign({},w?R:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:r,[`${t}-tree-node--checkable`]:i,[`${t}-tree-node--highlight`]:h,[`${t}-tree-node--pending`]:K,[`${t}-tree-node--disabled`]:y,[`${t}-tree-node--selectable`]:s,[`${t}-tree-node--clickable`]:s||d||this.mergedCheckOnClick},R==null?void 0:R.class],"data-key":b,draggable:g&&w,onClick:this.handleLineClick,onDragstart:g&&w&&!y?this.handleDragStart:void 0}),D,e.isLeaf&&this.showLine?C("div",{class:[`${t}-tree-node-indent`,`${t}-tree-node-indent--show-line`,e.isLeaf&&`${t}-tree-node-indent--is-leaf`,e.isLastChild&&`${t}-tree-node-indent--last-child`]},C("div",{style:{width:`${p}px`}})):C(rl,{clsPrefix:t,expanded:this.expanded,selected:r,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:p,onClick:this.handleSwitcherClick}),L?null:$,C(sl,{ref:"contentInstRef",clsPrefix:t,checked:_,selected:r,onClick:this.handleContentClick,nodeProps:w?void 0:R,onDragstart:g&&!w&&!y?this.handleDragStart:void 0,tmNode:e}),g?this.showDropMark?Dn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:p}):this.showDropMarkAsParent?Dn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:p}):null:null,L?$:null))}});function gl({props:e,fNodesRef:t,mergedExpandedKeysRef:i,mergedSelectedKeysRef:d,mergedCheckedKeysRef:s,handleCheck:r,handleSelect:_,handleSwitcherClick:h}){const{value:g}=d,w=Ee(Un,null),p=w?w.pendingNodeKeyRef:G(g.length?g[g.length-1]:null);function D(y){var K;if(!e.keyboard)return{enterBehavior:null};const{value:k}=p;let R=null;if(k===null){if((y.key==="ArrowDown"||y.key==="ArrowUp")&&y.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(y.key)&&k===null){const{value:v}=t;let a=0;for(;a<v.length;){if(!v[a].disabled){p.value=v[a].key;break}a+=1}}}else{const{value:v}=t;let a=v.findIndex(b=>b.key===k);if(!~a)return{enterBehavior:null};if(y.key==="Enter"){const b=v[a];switch(R=((K=e.overrideDefaultNodeClickBehavior)===null||K===void 0?void 0:K.call(e,{option:b.rawNode}))||null,R){case"toggleCheck":r(b,!s.value.includes(b.key));break;case"toggleSelect":_(b);break;case"toggleExpand":h(b);break;case"none":break;case"default":default:R="default",_(b)}}else if(y.key==="ArrowDown")for(y.preventDefault(),a+=1;a<v.length;){if(!v[a].disabled){p.value=v[a].key;break}a+=1}else if(y.key==="ArrowUp")for(y.preventDefault(),a-=1;a>=0;){if(!v[a].disabled){p.value=v[a].key;break}a-=1}else if(y.key==="ArrowLeft"){const b=v[a];if(b.isLeaf||!i.value.includes(k)){const L=b.getParent();L&&(p.value=L.key)}else h(b)}else if(y.key==="ArrowRight"){const b=v[a];if(b.isLeaf)return{enterBehavior:null};if(!i.value.includes(k))h(b);else for(a+=1;a<v.length;){if(!v[a].disabled){p.value=v[a].key;break}a+=1}}}return{enterBehavior:R}}return{pendingNodeKeyRef:p,handleKeydown:D}}const vl=re({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return C(_t,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>C("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Tn(this.height)}},this.nodes.map(t=>C(zn,{clsPrefix:e,tmNode:t})))})}}),fn=Nt(),ml=M("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[ce("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),ce(">",[M("tree-node",[ce("&:first-child","margin-top: 0;")])]),M("tree-motion-wrapper",[H("expand",[xn({duration:"0.2s"})]),H("collapse",[xn({duration:"0.2s",reverse:!0})])]),M("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),M("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[H("highlight",[M("tree-node-content",[Ke("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),H("disabled",[M("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Te("disabled",[H("clickable",[M("tree-node-content",`
 cursor: pointer;
 `)])])]),H("block-node",[M("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Te("block-line",[M("tree-node",[Te("disabled",[M("tree-node-content",[ce("&:hover","background: var(--n-node-color-hover);")]),H("selectable",[M("tree-node-content",[ce("&:active","background: var(--n-node-color-pressed);")])]),H("pending",[M("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),H("selected",[M("tree-node-content","background: var(--n-node-color-active);")])]),H("selected",[M("tree-node-content","background: var(--n-node-color-active);")])])]),H("block-line",[M("tree-node",[Te("disabled",[ce("&:hover","background: var(--n-node-color-hover);"),H("pending",`
 background: var(--n-node-color-hover);
 `),H("selectable",[Te("selected",[ce("&:active","background: var(--n-node-color-pressed);")])]),H("selected","background: var(--n-node-color-active);")]),H("selected","background: var(--n-node-color-active);"),H("disabled",`
 cursor: not-allowed;
 `)])]),M("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[H("show-line","position: relative",[ce("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),H("last-child",[ce("&::before",`
 bottom: 50%;
 `)]),H("is-leaf",[ce("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),Te("show-line","height: 0;")]),M("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[Ke("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[M("icon",[fn]),M("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[fn]),M("base-icon",[fn])]),H("hide","visibility: hidden;"),H("expanded","transform: rotate(90deg);")]),M("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),M("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ce("&:last-child","margin-bottom: 0;"),Ke("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),Ke("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),Ke("suffix",`
 display: inline-flex;
 `)]),Ke("empty","margin: auto;")]);var bl=function(e,t,i,d){function s(r){return r instanceof i?r:new i(function(_){_(r)})}return new(i||(i=Promise))(function(r,_){function h(p){try{w(d.next(p))}catch(D){_(D)}}function g(p){try{w(d.throw(p))}catch(D){_(D)}}function w(p){p.done?r(p.value):s(p.value).then(h,g)}w((d=d.apply(e,[])).next())})};function pl(e,t,i,d){return{getIsGroup(){return!1},getKey(r){return r[e]},getChildren:d||(r=>r[t]),getDisabled(r){return!!(r[i]||r.checkboxDisabled)}}}const yl={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},kl=Object.assign(Object.assign(Object.assign(Object.assign({},An.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:cl},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),yl),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),jn=re({name:"Tree",props:kl,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:i,mergedRtlRef:d}=Rt(e),s=Ct("Tree",d,t),r=An("Tree","-tree",ml,Lt,e,t),_=G(null),h=G(null),g=G(null);function w(){var n;return(n=g.value)===null||n===void 0?void 0:n.listElRef}function p(){var n;return(n=g.value)===null||n===void 0?void 0:n.itemsElRef}const D=z(()=>{const{filter:n}=e;if(n)return n;const{labelField:l}=e;return(o,u)=>{if(!o.length)return!0;const f=u[l];return typeof f=="string"?f.toLowerCase().includes(o.toLowerCase()):!1}}),y=z(()=>{const{pattern:n}=e;return n?!n.length||!D.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:hl(e.data,D.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),K=z(()=>St(e.showIrrelevantNodes?e.data:y.value.filteredTree,pl(e.keyField,e.childrenField,e.disabledField,e.getChildren))),k=Ee(Un,null),R=e.internalTreeSelect?k.dataTreeMate:K,{watchProps:v}=e,a=G([]);v!=null&&v.includes("defaultCheckedKeys")?Ue(()=>{a.value=e.defaultCheckedKeys}):a.value=e.defaultCheckedKeys;const b=O(e,"checkedKeys"),L=Xe(b,a),$=z(()=>R.value.getCheckedKeys(L.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),F=ul(e),T=z(()=>$.value.checkedKeys),A=z(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:$.value.indeterminateKeys}),W=G([]);v!=null&&v.includes("defaultSelectedKeys")?Ue(()=>{W.value=e.defaultSelectedKeys}):W.value=e.defaultSelectedKeys;const le=O(e,"selectedKeys"),q=Xe(le,W),ye=G([]),ke=n=>{ye.value=e.defaultExpandAll?R.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};v!=null&&v.includes("defaultExpandedKeys")?Ue(()=>{ke(void 0)}):Ue(()=>{ke(e.defaultExpandedKeys)});const ge=O(e,"expandedKeys"),X=Xe(ge,ye),oe=z(()=>K.value.getFlattenedNodes(X.value)),{pendingNodeKeyRef:fe,handleKeydown:j}=gl({props:e,mergedCheckedKeysRef:L,mergedSelectedKeysRef:q,fNodesRef:oe,mergedExpandedKeysRef:X,handleCheck:rn,handleSelect:dn,handleSwitcherClick:mn});let de=null,ve=null;const Oe=G(new Set),en=z(()=>e.internalHighlightKeySet||y.value.highlightKeySet),nn=Xe(en,Oe),c=G(new Set),P=z(()=>X.value.filter(n=>!c.value.has(n)));let I=0;const V=G(null),Q=G(null),He=G(null),Ve=G(null),qe=G(0),Hn=z(()=>{const{value:n}=Q;return n?n.parent:null});let tn=!1;Ae(O(e,"data"),()=>{tn=!0,Qe(()=>{tn=!1}),c.value.clear(),fe.value=null,$e()},{deep:!1});let ln=!1;const on=()=>{ln=!0,Qe(()=>{ln=!1})};let Ie;Ae(O(e,"pattern"),(n,l)=>{if(e.showIrrelevantNodes)if(Ie=void 0,n){const{expandedKeys:o,highlightKeySet:u}=fl(e.data,e.pattern,e.keyField,e.childrenField,D.value);Oe.value=u,on(),_e(o,ne(o),{node:null,action:"filter"})}else Oe.value=new Set;else if(!n.length)Ie!==void 0&&(on(),_e(Ie,ne(Ie),{node:null,action:"filter"}));else{l.length||(Ie=X.value);const{expandedKeys:o}=y.value;o!==void 0&&(on(),_e(o,ne(o),{node:null,action:"filter"}))}});function gn(n){return bl(this,void 0,void 0,function*(){const{onLoad:l}=e;if(!l){yield Promise.resolve();return}const{value:o}=c;if(!o.has(n.key)){o.add(n.key);try{(yield l(n.rawNode))===!1&&Ne()}catch(u){console.error(u),Ne()}o.delete(n.key)}})}Ue(()=>{var n;const{value:l}=K;if(!l)return;const{getNode:o}=l;(n=X.value)===null||n===void 0||n.forEach(u=>{const f=o(u);f&&!f.shallowLoaded&&gn(f)})});const we=G(!1),me=G([]);Ae(P,(n,l)=>{if(!e.animated||ln){Qe(Ge);return}if(tn)return;const o=Me(r.value.self.nodeHeight),u=new Set(l);let f=null,U=null;for(const E of n)if(!u.has(E)){if(f!==null)return;f=E}const J=new Set(n);for(const E of l)if(!J.has(E)){if(U!==null)return;U=E}if(f===null&&U===null)return;const{virtualScroll:te}=e,Ce=(te?g.value.listElRef:_.value).offsetHeight,Se=Math.ceil(Ce/o)+1;let ae;if(f!==null&&(ae=l),U!==null&&(ae===void 0?ae=n:ae=ae.filter(E=>E!==U)),we.value=!0,me.value=K.value.getFlattenedNodes(ae),f!==null){const E=me.value.findIndex(ie=>ie.key===f);if(~E){const ie=me.value[E].children;if(ie){const se=wn(ie,n);me.value.splice(E+1,0,{__motion:!0,mode:"expand",height:te?se.length*o:void 0,nodes:te?se.slice(0,Se):se})}}}if(U!==null){const E=me.value.findIndex(ie=>ie.key===U);if(~E){const ie=me.value[E].children;if(!ie)return;we.value=!0;const se=wn(ie,n);me.value.splice(E+1,0,{__motion:!0,mode:"collapse",height:te?se.length*o:void 0,nodes:te?se.slice(0,Se):se})}}});const Vn=z(()=>Dt(oe.value)),qn=z(()=>we.value?me.value:oe.value);function Ge(){const{value:n}=h;n&&n.sync()}function Gn(){we.value=!1,e.virtualScroll&&Qe(Ge)}function ne(n){const{getNode:l}=R.value;return n.map(o=>{var u;return((u=l(o))===null||u===void 0?void 0:u.rawNode)||null})}function _e(n,l,o){const{"onUpdate:expandedKeys":u,onUpdateExpandedKeys:f}=e;ye.value=n,u&&ee(u,n,l,o),f&&ee(f,n,l,o)}function vn(n,l,o){const{"onUpdate:checkedKeys":u,onUpdateCheckedKeys:f}=e;a.value=n,f&&ee(f,n,l,o),u&&ee(u,n,l,o)}function Wn(n,l){const{"onUpdate:indeterminateKeys":o,onUpdateIndeterminateKeys:u}=e;o&&ee(o,n,l),u&&ee(u,n,l)}function an(n,l,o){const{"onUpdate:selectedKeys":u,onUpdateSelectedKeys:f}=e;W.value=n,f&&ee(f,n,l,o),u&&ee(u,n,l,o)}function Yn(n){const{onDragenter:l}=e;l&&ee(l,n)}function Xn(n){const{onDragleave:l}=e;l&&ee(l,n)}function Qn(n){const{onDragend:l}=e;l&&ee(l,n)}function Zn(n){const{onDragstart:l}=e;l&&ee(l,n)}function Jn(n){const{onDragover:l}=e;l&&ee(l,n)}function et(n){const{onDrop:l}=e;l&&ee(l,n)}function $e(){nt(),xe()}function nt(){V.value=null}function xe(){qe.value=0,Q.value=null,He.value=null,Ve.value=null,Ne()}function Ne(){de&&(window.clearTimeout(de),de=null),ve=null}function rn(n,l){if(e.disabled||be(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){dn(n);return}const o=l?"check":"uncheck",{checkedKeys:u,indeterminateKeys:f}=R.value[o](n.key,T.value,{cascade:e.cascade,checkStrategy:F.value,allowNotLoaded:e.allowCheckingNotLoaded});vn(u,ne(u),{node:n.rawNode,action:o}),Wn(f,ne(f))}function tt(n){if(e.disabled)return;const{key:l}=n,{value:o}=X,u=o.findIndex(f=>f===l);if(~u){const f=Array.from(o);f.splice(u,1),_e(f,ne(f),{node:n.rawNode,action:"collapse"})}else{const f=K.value.getNode(l);if(!f||f.isLeaf)return;let U;if(e.accordion){const J=new Set(n.siblings.map(({key:te})=>te));U=o.filter(te=>!J.has(te)),U.push(l)}else U=o.concat(l);_e(U,ne(U),{node:n.rawNode,action:"expand"})}}function mn(n){e.disabled||we.value||tt(n)}function dn(n){if(!(e.disabled||!e.selectable)){if(fe.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:l,indeterminateKeys:o}}=$;e.multiple?rn(n,!(l.includes(n.key)||o.includes(n.key))):vn([n.key],ne([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const l=Array.from(q.value),o=l.findIndex(u=>u===n.key);~o?e.cancelable&&l.splice(o,1):~o||l.push(n.key),an(l,ne(l),{node:n.rawNode,action:~o?"unselect":"select"})}else q.value.includes(n.key)?e.cancelable&&an([],[],{node:n.rawNode,action:"unselect"}):an([n.key],ne([n.key]),{node:n.rawNode,action:"select"})}}function lt(n){if(de&&(window.clearTimeout(de),de=null),n.isLeaf)return;ve=n.key;const l=()=>{if(ve!==n.key)return;const{value:o}=He;if(o&&o.key===n.key&&!X.value.includes(n.key)){const u=X.value.concat(n.key);_e(u,ne(u),{node:n.rawNode,action:"expand"})}de=null,ve=null};n.shallowLoaded?de=window.setTimeout(()=>{l()},1e3):de=window.setTimeout(()=>{gn(n).then(()=>{l()})},1e3)}function ot({event:n,node:l}){!e.draggable||e.disabled||be(l,e.disabledField)||(bn({event:n,node:l},!1),Yn({event:n,node:l.rawNode}))}function at({event:n,node:l}){!e.draggable||e.disabled||be(l,e.disabledField)||Xn({event:n,node:l.rawNode})}function it(n){n.target===n.currentTarget&&xe()}function rt({event:n,node:l}){$e(),!(!e.draggable||e.disabled||be(l,e.disabledField))&&Qn({event:n,node:l.rawNode})}function dt({event:n,node:l}){!e.draggable||e.disabled||be(l,e.disabledField)||(I=n.clientX,V.value=l,Zn({event:n,node:l.rawNode}))}function bn({event:n,node:l},o=!0){var u;if(!e.draggable||e.disabled||be(l,e.disabledField))return;const{value:f}=V;if(!f)return;const{allowDrop:U,indent:J}=e;o&&Jn({event:n,node:l.rawNode});const te=n.currentTarget,{height:Ce,top:Se}=te.getBoundingClientRect(),ae=n.clientY-Se;let E;U({node:l.rawNode,dropPosition:"inside",phase:"drag"})?ae<=8?E="before":ae>=Ce-8?E="after":E="inside":ae<=Ce/2?E="before":E="after";const{value:se}=Vn;let B,Y;const De=se(l.key);if(De===null){xe();return}let We=!1;E==="inside"?(B=l,Y="inside"):E==="before"?l.isFirstChild?(B=l,Y="before"):(B=oe.value[De-1],Y="after"):(B=l,Y="after"),!B.isLeaf&&X.value.includes(B.key)&&(We=!0,Y==="after"&&(B=oe.value[De+1],B?Y="before":(B=l,Y="inside")));const yn=B;if(He.value=yn,!We&&f.isLastChild&&f.key===B.key&&(Y="after"),Y==="after"){let kn=I-n.clientX,sn=0;for(;kn>=J/2&&B.parent!==null&&B.isLastChild&&sn<1;)kn-=J,sn+=1,B=B.parent;qe.value=sn}else qe.value=0;if((f.contains(B)||Y==="inside"&&((u=f.parent)===null||u===void 0?void 0:u.key)===B.key)&&!(f.key===yn.key&&f.key===B.key)){xe();return}if(!U({node:B.rawNode,dropPosition:Y,phase:"drag"})){xe();return}if(f.key===B.key)Ne();else if(ve!==B.key)if(Y==="inside"){if(e.expandOnDragenter){if(lt(B),!B.shallowLoaded&&ve!==B.key){$e();return}}else if(!B.shallowLoaded){$e();return}}else Ne();else Y!=="inside"&&Ne();Ve.value=Y,Q.value=B}function st({event:n,node:l,dropPosition:o}){if(!e.draggable||e.disabled||be(l,e.disabledField))return;const{value:u}=V,{value:f}=Q,{value:U}=Ve;if(!(!u||!f||!U)&&e.allowDrop({node:f.rawNode,dropPosition:U,phase:"drag"})&&u.key!==f.key){if(U==="before"){const J=u.getNext({includeDisabled:!0});if(J&&J.key===f.key){xe();return}}if(U==="after"){const J=u.getPrev({includeDisabled:!0});if(J&&J.key===f.key){xe();return}}et({event:n,node:f.rawNode,dragNode:u.rawNode,dropPosition:o}),$e()}}function ct(){Ge()}function ut(){Ge()}function ft(n){var l;if(e.virtualScroll||e.internalScrollable){const{value:o}=h;if(!((l=o==null?void 0:o.containerRef)===null||l===void 0)&&l.contains(n.relatedTarget))return;fe.value=null}else{const{value:o}=_;if(o!=null&&o.contains(n.relatedTarget))return;fe.value=null}}Ae(fe,n=>{var l,o;if(n!==null){if(e.virtualScroll)(l=g.value)===null||l===void 0||l.scrollTo({key:n});else if(e.internalScrollable){const{value:u}=h;if(u===null)return;const f=(o=u.contentRef)===null||o===void 0?void 0:o.querySelector(`[data-key="${$n(n)}"]`);if(!f)return;u.scrollTo({el:f})}}}),Kt(je,{loadingKeysRef:c,highlightKeySetRef:nn,displayedCheckedKeysRef:T,displayedIndeterminateKeysRef:A,mergedSelectedKeysRef:q,mergedExpandedKeysRef:X,mergedThemeRef:r,mergedCheckStrategyRef:F,nodePropsRef:O(e,"nodeProps"),disabledRef:O(e,"disabled"),checkableRef:O(e,"checkable"),selectableRef:O(e,"selectable"),expandOnClickRef:O(e,"expandOnClick"),onLoadRef:O(e,"onLoad"),draggableRef:O(e,"draggable"),blockLineRef:O(e,"blockLine"),indentRef:O(e,"indent"),cascadeRef:O(e,"cascade"),checkOnClickRef:O(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:He,droppingNodeParentRef:Hn,draggingNodeRef:V,droppingPositionRef:Ve,droppingOffsetLevelRef:qe,fNodesRef:oe,pendingNodeKeyRef:fe,showLineRef:O(e,"showLine"),disabledFieldRef:O(e,"disabledField"),internalScrollableRef:O(e,"internalScrollable"),internalCheckboxFocusableRef:O(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:O(e,"renderLabel"),renderPrefixRef:O(e,"renderPrefix"),renderSuffixRef:O(e,"renderSuffix"),renderSwitcherIconRef:O(e,"renderSwitcherIcon"),labelFieldRef:O(e,"labelField"),multipleRef:O(e,"multiple"),overrideDefaultNodeClickBehaviorRef:O(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:mn,handleDragEnd:rt,handleDragEnter:ot,handleDragLeave:at,handleDragStart:dt,handleDrop:st,handleDragOver:bn,handleSelect:dn,handleCheck:rn});function ht(n,l){var o,u;typeof n=="number"?(o=g.value)===null||o===void 0||o.scrollTo(n,l||0):(u=g.value)===null||u===void 0||u.scrollTo(n)}const gt={handleKeydown:j,scrollTo:ht,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=$.value;return{keys:n,options:ne(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=$.value;return{keys:n,options:ne(n)}}},pn=z(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:l,nodeBorderRadius:o,nodeColorHover:u,nodeColorPressed:f,nodeColorActive:U,arrowColor:J,loadingColor:te,nodeTextColor:Ce,nodeTextColorDisabled:Se,dropMarkColor:ae,nodeWrapperPadding:E,nodeHeight:ie,lineHeight:se,lineColor:B}}=r.value,Y=un(E,"top"),De=un(E,"bottom"),We=Tn(Me(ie)-Me(Y)-Me(De));return{"--n-arrow-color":J,"--n-loading-color":te,"--n-bezier":n,"--n-font-size":l,"--n-node-border-radius":o,"--n-node-color-active":U,"--n-node-color-hover":u,"--n-node-color-pressed":f,"--n-node-text-color":Ce,"--n-node-text-color-disabled":Se,"--n-drop-mark-color":ae,"--n-node-wrapper-padding":E,"--n-line-offset-top":`-${Y}`,"--n-line-offset-bottom":`-${De}`,"--n-node-content-height":We,"--n-line-height":se,"--n-line-color":B}}),Re=i?Tt("tree",void 0,pn,e):void 0;return Object.assign(Object.assign({},gt),{mergedClsPrefix:t,mergedTheme:r,rtlEnabled:s,fNodes:qn,aip:we,selfElRef:_,virtualListInstRef:g,scrollbarInstRef:h,handleFocusout:ft,handleDragLeaveTree:it,handleScroll:ct,getScrollContainer:w,getScrollContent:p,handleAfterEnter:Gn,handleResize:ut,cssVars:i?void 0:pn,themeClass:Re==null?void 0:Re.themeClass,onRender:Re==null?void 0:Re.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:i}=this;if(!t.length&&i)return i();const{mergedClsPrefix:d,blockNode:s,blockLine:r,draggable:_,disabled:h,internalFocusable:g,checkable:w,handleKeydown:p,rtlEnabled:D,handleFocusout:y,scrollbarProps:K}=this,k=g&&!h,R=k?"0":void 0,v=[`${d}-tree`,D&&`${d}-tree--rtl`,w&&`${d}-tree--checkable`,(r||s)&&`${d}-tree--block-node`,r&&`${d}-tree--block-line`],a=L=>"__motion"in L?C(vl,{height:L.height,nodes:L.nodes,clsPrefix:d,mode:L.mode,onAfterEnter:this.handleAfterEnter}):C(zn,{key:L.key,tmNode:L,clsPrefix:d});if(this.virtualScroll){const{mergedTheme:L,internalScrollablePadding:$}=this,F=un($||"0");return C(Nn,Object.assign({},K,{ref:"scrollbarInstRef",onDragleave:_?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:v,theme:L.peers.Scrollbar,themeOverrides:L.peerOverrides.Scrollbar,tabindex:R,onKeydown:k?p:void 0,onFocusout:k?y:void 0}),{default:()=>{var T;return(T=this.onRender)===null||T===void 0||T.call(this),t.length?C(At,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Me(L.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:F.top,paddingBottom:F.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:F.left,paddingRight:F.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:A})=>a(A)}):_n(this.$slots.empty,()=>[C(Rn,{class:`${d}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:b}=this;return v.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),b?C(Nn,Object.assign({},K,{class:v,tabindex:R,onKeydown:k?p:void 0,onFocusout:k?y:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>C("div",{onDragleave:_?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(a))}):C("div",{class:v,tabindex:R,ref:"selfElRef",style:this.cssVars,onKeydown:k?p:void 0,onFocusout:k?y:void 0,onDragleave:_?this.handleDragLeaveTree:void 0},t.length?t.map(a):_n(this.$slots.empty,()=>[C(Rn,{class:`${d}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),xl={class:"flex-y-center gap-16px pb-12px"},wl=re({name:"MenuAuthModal",__name:"menu-auth-modal",props:ze({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(e){const t=e,i=Ze(e,"visible");function d(){i.value=!1}const s=z(()=>N("common.edit")+N("page.manage.role.menuAuth")),r=Le("");async function _(){console.log(t.roleId),r.value="home"}async function h(a){r.value=a}const g=Le([]);async function w(){const{error:a,data:b}=await Ht();a||(g.value=b)}const p=z(()=>g.value.map(b=>({label:b,value:b}))),D=Le([]);async function y(){const{error:a,data:b}=await Vt();a||(D.value=b)}const K=Le([]);async function k(){console.log(t.roleId),K.value=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]}function R(){var a,b;console.log(K.value,t.roleId),(b=(a=window.$message)==null?void 0:a.success)==null||b.call(a,N("common.modifySuccess")),d()}function v(){_(),w(),y(),k()}return Ae(i,a=>{a&&v()}),(a,b)=>{const L=Ln,$=jn,F=Fe,T=Je,A=Pn;return pe(),Be(A,{show:i.value,"onUpdate:show":b[1]||(b[1]=W=>i.value=W),title:s.value,preset:"card",class:"w-480px"},{footer:S(()=>[x(T,{justify:"end"},{default:S(()=>[x(F,{size:"small",class:"mt-16px",onClick:d},{default:S(()=>[he(ue(m(N)("common.cancel")),1)]),_:1}),x(F,{type:"primary",size:"small",class:"mt-16px",onClick:R},{default:S(()=>[he(ue(m(N)("common.confirm")),1)]),_:1})]),_:1})]),default:S(()=>[Cn("div",xl,[Cn("div",null,ue(m(N)("page.manage.menu.home")),1),x(L,{value:r.value,options:p.value,size:"small",class:"w-160px","onUpdate:value":h},null,8,["value","options"])]),x($,{"checked-keys":K.value,"onUpdate:checkedKeys":b[0]||(b[0]=W=>K.value=W),data:D.value,"key-field":"id",checkable:"","expand-on-click":"","virtual-scroll":"","block-line":"",class:"h-280px"},null,8,["checked-keys","data"])]),_:1},8,["show","title"])}}}),_l=re({name:"ButtonAuthModal",__name:"button-auth-modal",props:ze({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(e){const t=e,i=Ze(e,"visible");function d(){i.value=!1}const s=z(()=>N("common.edit")+N("page.manage.role.buttonAuth")),r=Le([]);async function _(){r.value=[{id:"1",label:"button1",code:"code1"},{id:"2",label:"button2",code:"code2"},{id:"3",label:"button3",code:"code3"},{id:"4",label:"button4",code:"code4"},{id:"5",label:"button5",code:"code5"},{id:"6",label:"button6",code:"code6"},{id:"7",label:"button7",code:"code7"},{id:"8",label:"button8",code:"code8"},{id:"9",label:"button9",code:"code9"},{id:"10",label:"button10",code:"code10"}]}const h=Le([]);async function g(){console.log(t.roleId),h.value=[1,2,3,4,5]}function w(){var D,y;console.log(h.value,t.roleId),(y=(D=window.$message)==null?void 0:D.success)==null||y.call(D,N("common.modifySuccess")),d()}function p(){_(),g()}return p(),(D,y)=>{const K=jn,k=Fe,R=Je,v=Pn;return pe(),Be(v,{show:i.value,"onUpdate:show":y[1]||(y[1]=a=>i.value=a),title:s.value,preset:"card",class:"w-480px"},{footer:S(()=>[x(R,{justify:"end"},{default:S(()=>[x(k,{size:"small",class:"mt-16px",onClick:d},{default:S(()=>[he(ue(m(N)("common.cancel")),1)]),_:1}),x(k,{type:"primary",size:"small",class:"mt-16px",onClick:w},{default:S(()=>[he(ue(m(N)("common.confirm")),1)]),_:1})]),_:1})]),default:S(()=>[x(K,{"checked-keys":h.value,"onUpdate:checkedKeys":y[0]||(y[0]=a=>h.value=a),data:r.value,"key-field":"id",checkable:"","expand-on-click":"","virtual-scroll":"","block-line":"",class:"h-280px"},null,8,["checked-keys","data"])]),_:1},8,["show","title"])}}}),Nl=re({name:"RoleOperateDrawer",__name:"role-operate-drawer",props:ze({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:ze(["submitted"],["update:visible"]),setup(e,{emit:t}){const i=e,d=t,s=Ze(e,"visible"),{formRef:r,validate:_,restoreValidation:h}=Qt(),{defaultRequiredRule:g}=Zt(),{bool:w,setTrue:p}=Sn(),{bool:D,setTrue:y}=Sn(),K=z(()=>({add:N("page.manage.role.addRole"),edit:N("page.manage.role.editRole")})[i.operateType]),k=Pt(R());function R(){return{roleName:"",roleCode:"",roleDesc:"",status:null}}const v={roleName:g,roleCode:g,status:g},a=z(()=>{var T;return((T=i.rowData)==null?void 0:T.id)||-1}),b=z(()=>i.operateType==="edit");function L(){Object.assign(k,R()),i.operateType==="edit"&&i.rowData&&Object.assign(k,i.rowData)}function $(){s.value=!1}async function F(){var T;await _(),(T=window.$message)==null||T.success(N("common.updateSuccess")),$(),d("submitted")}return Ae(s,()=>{s.value&&(L(),h())}),(T,A)=>{const W=En,le=Jt,q=nl,ye=el,ke=In,ge=Fe,X=Je,oe=Ot,fe=It;return pe(),Be(fe,{show:s.value,"onUpdate:show":A[6]||(A[6]=j=>s.value=j),"display-directive":"show",width:360},{default:S(()=>[x(oe,{title:K.value,"native-scrollbar":!1,closable:""},{footer:S(()=>[x(X,{size:16},{default:S(()=>[x(ge,{onClick:$},{default:S(()=>[he(ue(m(N)("common.cancel")),1)]),_:1}),x(ge,{type:"primary",onClick:F},{default:S(()=>[he(ue(m(N)("common.confirm")),1)]),_:1})]),_:1})]),default:S(()=>[x(ke,{ref_key:"formRef",ref:r,model:k,rules:v},{default:S(()=>[x(le,{label:m(N)("page.manage.role.roleName"),path:"roleName"},{default:S(()=>[x(W,{value:k.roleName,"onUpdate:value":A[0]||(A[0]=j=>k.roleName=j),placeholder:m(N)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),x(le,{label:m(N)("page.manage.role.roleCode"),path:"roleCode"},{default:S(()=>[x(W,{value:k.roleCode,"onUpdate:value":A[1]||(A[1]=j=>k.roleCode=j),placeholder:m(N)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),x(le,{label:m(N)("page.manage.role.roleStatus"),path:"status"},{default:S(()=>[x(ye,{value:k.status,"onUpdate:value":A[2]||(A[2]=j=>k.status=j)},{default:S(()=>[(pe(!0),Bn(Ft,null,Bt(m(Fn),j=>(pe(),Be(q,{key:j.value,value:j.value,label:m(N)(j.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),x(le,{label:m(N)("page.manage.role.roleDesc"),path:"roleDesc"},{default:S(()=>[x(W,{value:k.roleDesc,"onUpdate:value":A[3]||(A[3]=j=>k.roleDesc=j),placeholder:m(N)("page.manage.role.form.roleDesc")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),b.value?(pe(),Be(X,{key:0},{default:S(()=>[x(ge,{onClick:m(p)},{default:S(()=>[he(ue(m(N)("page.manage.role.menuAuth")),1)]),_:1},8,["onClick"]),x(wl,{visible:m(w),"onUpdate:visible":A[4]||(A[4]=j=>Pe(w)?w.value=j:null),"role-id":a.value},null,8,["visible","role-id"]),x(ge,{onClick:m(y)},{default:S(()=>[he(ue(m(N)("page.manage.role.buttonAuth")),1)]),_:1},8,["onClick"]),x(_l,{visible:m(D),"onUpdate:visible":A[5]||(A[5]=j=>Pe(D)?D.value=j:null),"role-id":a.value},null,8,["visible","role-id"])]),_:1})):Et("",!0)]),_:1},8,["title"])]),_:1},8,["show"])}}}),Rl=re({name:"RoleSearch",__name:"role-search",props:{model:{required:!0},modelModifiers:{}},emits:ze(["reset","search"],["update:model"]),setup(e,{emit:t}){const i=t,d=Ze(e,"model");function s(){i("reset")}function r(){i("search")}return(_,h)=>{const g=En,w=Gt,p=Ln,D=ol,y=Fe,K=al,k=Je,R=tl,v=In,a=On;return pe(),Be(a,{title:m(N)("common.search"),bordered:!1,size:"small",class:"card-wrapper"},{default:S(()=>[x(v,{model:d.value,"label-placement":"left","label-width":80},{default:S(()=>[x(R,{responsive:"screen","item-responsive":""},{default:S(()=>[x(w,{span:"24 s:12 m:6",label:m(N)("page.manage.role.roleName"),path:"roleName",class:"pr-24px"},{default:S(()=>[x(g,{value:d.value.roleName,"onUpdate:value":h[0]||(h[0]=b=>d.value.roleName=b),placeholder:m(N)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),x(w,{span:"24 s:12 m:6",label:m(N)("page.manage.role.roleCode"),path:"roleCode",class:"pr-24px"},{default:S(()=>[x(g,{value:d.value.roleCode,"onUpdate:value":h[1]||(h[1]=b=>d.value.roleCode=b),placeholder:m(N)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),x(w,{span:"24 s:12 m:6",label:m(N)("page.manage.role.roleStatus"),path:"status",class:"pr-24px"},{default:S(()=>[x(p,{value:d.value.status,"onUpdate:value":h[2]||(h[2]=b=>d.value.status=b),placeholder:m(N)("page.manage.role.form.roleStatus"),options:m($t)(m(Fn)),clearable:""},null,8,["value","placeholder","options"])]),_:1},8,["label"]),x(w,{span:"24 s:12 m:6"},{default:S(()=>[x(k,{class:"w-full",justify:"end"},{default:S(()=>[x(y,{onClick:s},{icon:S(()=>[x(D,{class:"text-icon"})]),default:S(()=>[he(" "+ue(m(N)("common.reset")),1)]),_:1}),x(y,{type:"primary",ghost:"",onClick:r},{icon:S(()=>[x(K,{class:"text-icon"})]),default:S(()=>[he(" "+ue(m(N)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])}}}),Cl={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function hn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!jt(e)}const Fl=re({name:"manage_role",__name:"index",setup(e){const t=Ut(),{columns:i,columnChecks:d,data:s,loading:r,getData:_,mobilePagination:h,searchParams:g,resetSearchParams:w}=Wt({apiFn:qt,apiParams:{page:1,size:10,status:null,roleName:null,roleCode:null},columns:()=>[{type:"selection",align:"center",width:48},{key:"index",title:N("common.index"),width:64,align:"center"},{key:"roleName",title:N("page.manage.role.roleName"),align:"center",minWidth:120},{key:"roleCode",title:N("page.manage.role.roleCode"),align:"center",minWidth:120},{key:"roleDesc",title:N("page.manage.role.roleDesc"),minWidth:120},{key:"status",title:N("page.manage.role.roleStatus"),align:"center",width:100,render:F=>{if(F.status===null)return null;const T={1:"success",2:"warning"},A=N(Mt[F.status]);return x(zt,{type:T[F.status]},hn(A)?A:{default:()=>[A]})}},{key:"operate",title:N("common.operate"),align:"center",width:130,render:F=>{let T;return x("div",{class:"flex-center gap-8px"},[x(Fe,{type:"primary",ghost:!0,size:"small",onClick:()=>$(F.id)},hn(T=N("common.edit"))?T:{default:()=>[T]}),x(Xt,{onPositiveClick:()=>L(F.id)},{default:()=>N("common.confirmDelete"),trigger:()=>{let A;return x(Fe,{type:"error",ghost:!0,size:"small"},hn(A=N("common.delete"))?A:{default:()=>[A]})}})])}}]}),{drawerVisible:p,operateType:D,editingData:y,handleAdd:K,handleEdit:k,checkedRowKeys:R,onBatchDeleted:v,onDeleted:a}=Yt(s,_);async function b(){console.log(R.value),v()}function L(F){console.log(F),a()}function $(F){k(F)}return(F,T)=>{const A=vt,W=ll,le=On;return pe(),Bn("div",Cl,[x(Rl,{model:m(g),"onUpdate:model":T[0]||(T[0]=q=>Pe(g)?g.value=q:null),onReset:m(w),onSearch:m(_)},null,8,["model","onReset","onSearch"]),x(le,{title:m(N)("page.manage.role.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":S(()=>[x(A,{columns:m(d),"onUpdate:columns":T[1]||(T[1]=q=>Pe(d)?d.value=q:null),"disabled-delete":m(R).length===0,loading:m(r),onAdd:m(K),onDelete:b,onRefresh:m(_)},null,8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:S(()=>[x(W,{"checked-row-keys":m(R),"onUpdate:checkedRowKeys":T[2]||(T[2]=q=>Pe(R)?R.value=q:null),columns:m(i),data:m(s),size:"small","flex-height":!m(t).isMobile,"scroll-x":702,loading:m(r),remote:"","row-key":q=>q.id,pagination:m(h),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),x(Nl,{visible:m(p),"onUpdate:visible":T[3]||(T[3]=q=>Pe(p)?p.value=q:null),"operate-type":m(D),"row-data":m(y),onSubmitted:m(_)},null,8,["visible","operate-type","row-data","onSubmitted"])]),_:1},8,["title"])])}}});export{Fl as default};
